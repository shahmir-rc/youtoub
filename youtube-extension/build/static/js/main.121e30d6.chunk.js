(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,n){e.exports=n(52)},29:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),i=n(18),l=n.n(i),o=n(21),c=n(3),d=(n(29),n(19)),r=n.n(d),p=n(54);class m{constructor(e){let{apiKey:t,channelId:n}=e;this.apiKey=t,this.channelId=n}getSelectedVideos(e){const t=this;return new Promise((n,s)=>{try{n(Object(p.a)({method:"GET",baseURL:"https://www.googleapis.com/youtube/v3/videos/",url:"/?part=snippet&key=".concat(t.apiKey,"\n        &channelId=").concat(t.channelId,"\n        &type=video&order=date&id=").concat(e)}))}catch(a){s(a)}})}}var u={async initalizingVideoList(e,t){const n=new m(e);return await n.getSelectedVideos(t)}};let h=null,g=null,v=null;function f(){null===g?(clearInterval(v),v=null):null===g||g.closed?null!==g&&g.closed&&(clearInterval(v),h.focus(),h.close({message:"child was closed"}),v=null,g=null):g.focus()}class E extends a.a.Component{constructor(e){super(e),this.onClickHandler=this.onClickHandler.bind(this),h=window.self}onClickHandler(){const{url:e,name:t,opts:n,videos:s}=this.props;!g||g.closed?(g=h.open(e,t,n),setTimeout(()=>{g.opener.postMessage({message:"Opening YouTube Popup",selectedVideos:s},"*")},0),null===v&&(v=setInterval(f,2e3))):g.focus()}render(){const{children:e}=this.props;return a.a.createElement("button",{className:"choose_btn",type:"choose_btn",onClick:this.onClickHandler},e)}}E.defaultProps={name:"YouTube Popup",opts:"dependent=".concat(1,", alwaysOnTop=",1,", alwaysRaised=",1,", width=",800,", height=",590)};var w=n(20),b=n.n(w);class N extends a.a.Component{constructor(e){super(e),this.dragulaDecorator=(e=>{if(e){let t={copySortSource:!0};r()([e],t)}}),this.extension={},this.state={message:"",videoList:[],config:{}},this.sonResponse=this.sonResponse.bind(this),this.deleteVideo=this.deleteVideo.bind(this)}componentDidMount(){b.a.init().then(e=>{const{items:t}=e.field.getData();e.window.enableAutoResizing(),t&&"object"!==typeof t[0]?u.initalizingVideoList(e.config,t.toString()).then(t=>{const n=t.data.items.map(e=>{let t=e;return t.id={kind:"youtube#video",videoId:e.id},t});this.setState({config:e.config,videoList:n},()=>{this.extension=e,e.window.enableAutoResizing()})}).catch(e=>{console.log(e)}):this.setState({config:e.config,videoList:t||[]},()=>{this.extension=e,e.window.enableAutoResizing()})});window.addEventListener("message",e=>{const{data:t}=e,{videoList:n}=this.state;if(t.getConfig){const{config:t}=this.state;e.source.postMessage({message:"Sending Config files",config:t,selectedVideos:n},e.origin)}else t.selectedVideosList&&this.saveExtensionData(t.selectedVideosList)},!1)}saveExtensionData(e){const{config:t}=this.state;let n=[];t.saveFullResponse?n=e:e.forEach(e=>{n.push(e.id.videoId)}),this.extension.field.setData({items:n}),this.setState({videoList:e})}deleteVideo(e){const t=e.target.parentNode.parentNode.parentNode.id,{videoList:n}=this.state;n.splice(n.findIndex(e=>e.id.videoId===t),1),this.saveExtensionData(n)}sonResponse(e,t){e&&this.setState({message:t.message})}render(){const{videoList:e,config:t}=this.state;return a.a.createElement("header",{className:"App-header"},a.a.createElement("div",{className:"wrapper"},a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"reference-loading",style:{display:"none"}},a.a.createElement("div",{className:"loading-flash"},a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null))),a.a.createElement("div",{className:"main"},a.a.createElement("div",{className:"selected-item"},a.a.createElement("div",{className:"row selected-list"},a.a.createElement("ul",{className:"drag1",ref:this.dragulaDecorator},e&&e.map(e=>a.a.createElement("li",{id:e.id.videoId,title:e.snippet.title,key:e.snippet.channelTitle},a.a.createElement("div",{className:"file"},a.a.createElement("a",{href:"https://www.youtube.com/embed/".concat(e.id.videoId),target:"_blank",className:"fileimage"},a.a.createElement("span",{className:"fileimg",style:{backgroundImage:"url(".concat(e.snippet.thumbnails.default.url,")")}})),a.a.createElement("span",null,e.snippet.title),a.a.createElement("span",{className:"file-text"},"Channel Name-",e.snippet.channelTitle),a.a.createElement("span",{className:"file-text"},"Description-",e.snippet.description),a.a.createElement("div",{className:"file-action trash",onClick:this.deleteVideo},a.a.createElement("span",{className:"close-icon"})))))))))),a.a.createElement(E,{url:t.redirectUrl,bridge:this.sonResponse,videos:e},"Choose Asset")))}}var y=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(o.a,null,a.a.createElement(c.c,null,a.a.createElement(c.a,{exact:!0,path:"/",component:N}))))};var I=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,55)).then(t=>{let{getCLS:n,getFID:s,getFCP:a,getLCP:i,getTTFB:l}=t;n(e),s(e),a(e),i(e),l(e)})};l.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(y,null)),document.getElementById("root")),I()}},[[24,1,2]]]);