(this["webpackJsonpyoutube-extension"]=this["webpackJsonpyoutube-extension"]||[]).push([[0],{42:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var s=n(0),i=n.n(s),o=n(32),c=n.n(o),a=n(35),r=n(2),l=n(8),d=n(9),u=n(11),h=n(18),f=n(17),p=(n(42),n(33)),v=n.n(p),b=n(13),j=n.n(b),g=n(15),m=n(16),O=n.n(m),x=function(){function e(t){var n=t.apiKey,s=t.channelId;Object(l.a)(this,e),this.apiKey=n,this.channelId=s}return Object(d.a)(e,[{key:"getSelectedVideos",value:function(e){console.log("video ids here >>>>>> ",e);var t=this;return new Promise((function(n,s){try{n(O()({method:"GET",baseURL:"https://www.googleapis.com/youtube/v3/videos/",url:"/?part=snippet&key=".concat(t.apiKey,"\n        &channelId=").concat(t.channelId,"\n        &type=video&order=date&id=").concat(e)}))}catch(i){s(i)}}))}}]),e}(),w=function(e,t){return Object(g.a)(j.a.mark((function n(){var s;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("config and selected videos here >>>>>>",t),s=new x(e),n.next=4,s.getSelectedVideos(t);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))()},y=n(1),k=null,N=null,C=null;function I(){null===N?(clearInterval(C),C=null):null===N||N.closed?null!==N&&N.closed&&(clearInterval(C),k.focus(),k.close({message:"child was closed"}),C=null,N=null):N.focus()}var S=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(l.a)(this,n),(s=t.call(this,e)).onClickHandler=s.onClickHandler.bind(Object(u.a)(s)),k=window.self,s}return Object(d.a)(n,[{key:"onClickHandler",value:function(){var e=this.props,t=e.url,n=e.name,s=e.opts,i=e.videos;!N||N.closed?(N=k.open(t,n,s),setTimeout((function(){N.opener.postMessage({message:"Opening YouTube Popup",selectedVideos:i},"*")}),0),null===C&&(C=setInterval(I,2e3))):N.focus()}},{key:"render",value:function(){var e=this.props.children;return Object(y.jsx)("button",{className:"choose_btn",type:"choose_btn",onClick:this.onClickHandler,children:e})}}]),n}(i.a.Component);S.defaultProps={name:"YouTube Popup",opts:"dependent=".concat(1,", alwaysOnTop=",1,", alwaysRaised=",1,", width=",800,", height=",590)};var L=n(34),R=n.n(L),D=function(){function e(t){var n=t.platformUrl;Object(l.a)(this,e),this.platformUrl=n}return Object(d.a)(e,[{key:"getSidandContent",value:function(){var e="https://".concat(this.platformUrl,"/v1/auth/app/getYapiAddress"),t=new URL(e);"".concat(t.protocol,"//").concat(t.host);return new Promise((function(t,n){try{t(O.a.get(e,{headers:{Origin:"https://app.contentstack.com"}}))}catch(s){n(s)}}))}}]),e}(),V=function(e,t){return Object(g.a)(j.a.mark((function n(){var s;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("config and selected videos here >>>>>>",t),s=new D(e),n.next=4,s.getSidandContent();case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))()},T=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(l.a)(this,n),(s=t.call(this,e)).dragulaDecorator=function(e){if(e){v()([e],{copySortSource:!0})}},s.extension={},s.state={message:"",videoList:[],config:{}},s.sonResponse=s.sonResponse.bind(Object(u.a)(s)),s.deleteVideo=s.deleteVideo.bind(Object(u.a)(s)),s}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;R.a.init().then((function(t){console.log("extension here from ui extension >>>>>>>>",t);var n=t.field.getData().items;t.window.enableAutoResizing(),n&&"object"!==typeof n[0]?(w(t.config,n.toString()).then((function(n){console.log("data here from youtube >>>>>>",n);var s=n.data.items.map((function(e){var t=e;return t.id={kind:"youtube#video",videoId:e.id},t}));e.setState({config:t.config,videoList:s},(function(){e.extension=t,t.window.enableAutoResizing()}))})).catch((function(e){console.log(e)})),V(t.config,n.toString()).then((function(e){console.log("if response from bank here >>>>>>>",e)})).catch((function(e){console.log("if er from bank here >>>>",e)}))):(V(t.config,n.toString()).then((function(e){console.log("else response from bank here >>>>>>>",e)})).catch((function(e){console.log("else er from bank here >>>>",e)})),e.setState({config:t.config,videoList:n||[]},(function(){e.extension=t,t.window.enableAutoResizing()})))}));window.addEventListener("message",(function(t){console.log("event from receive message >>>>>",t);var n=t.data,s=e.state.videoList;if(n.getConfig){var i=e.state.config;t.source.postMessage({message:"Sending Config files",config:i,selectedVideos:s},t.origin)}else n.selectedVideosList&&e.saveExtensionData(n.selectedVideosList)}),!1)}},{key:"saveExtensionData",value:function(e){var t=this.state.config,n=[];t.saveFullResponse?n=e:e.forEach((function(e){n.push(e.id.videoId)})),this.extension.field.setData({items:n}),this.setState({videoList:e})}},{key:"deleteVideo",value:function(e){var t=e.target.parentNode.parentNode.parentNode.id,n=this.state.videoList;n.splice(n.findIndex((function(e){return e.id.videoId===t})),1),this.saveExtensionData(n)}},{key:"sonResponse",value:function(e,t){e&&this.setState({message:t.message})}},{key:"render",value:function(){var e=this,t=this.state,n=t.videoList,s=t.config;return Object(y.jsx)("header",{className:"App-header",children:Object(y.jsxs)("div",{className:"wrapper",children:[Object(y.jsxs)("div",{className:"container",children:[Object(y.jsx)("div",{className:"reference-loading",style:{display:"none"},children:Object(y.jsxs)("div",{className:"loading-flash",children:[Object(y.jsx)("div",{}),Object(y.jsx)("div",{}),Object(y.jsx)("div",{}),Object(y.jsx)("div",{})]})}),Object(y.jsx)("div",{className:"main",children:Object(y.jsx)("div",{className:"selected-item",children:Object(y.jsx)("div",{className:"row selected-list",children:Object(y.jsx)("ul",{className:"drag1",ref:this.dragulaDecorator,children:n&&n.map((function(t){return Object(y.jsx)("li",{id:t.id.videoId,title:t.snippet.title,children:Object(y.jsxs)("div",{className:"file",children:[Object(y.jsx)("a",{href:"https://www.youtube.com/embed/".concat(t.id.videoId),target:"_blank",className:"fileimage",children:Object(y.jsx)("span",{className:"fileimg",style:{backgroundImage:"url(".concat(t.snippet.thumbnails.default.url,")")}})}),Object(y.jsx)("span",{children:t.snippet.title}),Object(y.jsxs)("span",{className:"file-text",children:["Channel Name-",t.snippet.channelTitle]}),Object(y.jsxs)("span",{className:"file-text",children:["Description-",t.snippet.description]}),Object(y.jsx)("div",{className:"file-action trash",onClick:e.deleteVideo,children:Object(y.jsx)("span",{className:"close-icon"})})]})},t.snippet.channelTitle)}))})})})})]}),Object(y.jsx)(S,{url:s.redirectUrl,bridge:this.sonResponse,videos:n,children:"Choose Assets"})]})})}}]),n}(i.a.Component);var A=function(){return Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(a.a,{children:Object(y.jsx)(r.c,{children:Object(y.jsx)(r.a,{exact:!0,path:"/",component:T})})})})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,80)).then((function(t){var n=t.getCLS,s=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),s(e),i(e),o(e),c(e)}))};c.a.render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(A,{})}),document.getElementById("root")),E()}},[[79,1,2]]]);