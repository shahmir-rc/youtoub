(this["webpackJsonpyoutube-extension"]=this["webpackJsonpyoutube-extension"]||[]).push([[0],{43:function(e,n,t){},80:function(e,n,t){"use strict";t.r(n);var s=t(0),i=t.n(s),o=t(30),a=t.n(o),c=t(35),l=t(2),r=t(38),d=t(11),u=t(12),p=t(9),b=t(15),g=t(14),j=(t(43),t(31)),h=t.n(j),f=(t(18),t(32),t(33),t(1)),v=null,x=null,m=null;function O(){null===x?(clearInterval(m),m=null):null===x||x.closed?null!==x&&x.closed&&(clearInterval(m),v.focus(),v.close({message:"child was closed"}),m=null,x=null):x.focus()}var k=function(e){Object(b.a)(t,e);var n=Object(g.a)(t);function t(e){var s;return Object(d.a)(this,t),(s=n.call(this,e)).onClickHandler=s.onClickHandler.bind(Object(p.a)(s)),v=window.self,s}return Object(u.a)(t,[{key:"onClickHandler",value:function(){var e=this.props,n=e.url,t=e.name,s=e.opts,i=e.videos;!x||x.closed?(x=v.open(n,t,s),setTimeout((function(){x.opener.postMessage({message:"Opening YouTube Popup",selectedVideos:i},"*")}),0),null===m&&(m=setInterval(O,2e3))):x.focus()}},{key:"render",value:function(){var e=this.props.children;return Object(f.jsx)("button",{style:{zIndex:"1001",position:"relative"},className:"choose_btn",type:"choose_btn",onClick:this.onClickHandler,children:e})}}]),t}(i.a.Component);k.defaultProps={name:"YouTube Popup",opts:"dependent=".concat(1,", alwaysOnTop=",1,", alwaysRaised=",1,", width=",800,", height=",590)};var _=t(34),N=t.n(_),y=function(e){Object(b.a)(t,e);var n=Object(g.a)(t);function t(e){var s;return Object(d.a)(this,t),(s=n.call(this,e)).dragulaDecorator=function(e){if(e){h()([e],{copySortSource:!0})}},s.extension={},s.state={message:"",videoList:[],config:{}},s.sonResponse=s.sonResponse.bind(Object(p.a)(s)),s.deleteVideo=s.deleteVideo.bind(Object(p.a)(s)),s}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;N.a.init().then((function(n){var t=n.field.getData().items;n.window.enableAutoResizing(),t&&"object"!==typeof t[0]?console.log("no assest found"):(console.log("assets found"),e.setState({config:n.config,videoList:t||[]},(function(){e.extension=n,n.window.enableAutoResizing()})))})).catch((function(e){console.log("error here >>>",e)}));window.addEventListener("message",(function(n){var t=n.data,s=e.state.videoList;if(t.getConfig){var i=e.state.config;n.source.postMessage({message:"Sending Config files",config:i,selectedVideos:s},n.origin)}else t.selectedVideosList&&e.saveExtensionData(t.selectedVideosList);if(t.getSessionConfig){console.log("yes session data needed in popup sending");var o=[e.extension.store.get("intelligence_bank_session_token"),e.extension.store.get("intelligence_bank_client_token"),e.extension.store.get("intelligence_bank_url"),e.extension.store.get("intelligence_bank_expiration_token")];Promise.all(o).then((function(e){var t=Object(r.a)(e,4),s=t[0],i=t[1],o=t[2],a=t[3];console.log("session id from storage is >>>>>>>>.",s),s&&i&&o&&a&&(console.log("inside session id from storage is >>>>>>>>.",s),n.source.postMessage({message:"Sending session data to popup",sessionData:{sessionID:s,clientid:i,baseApiUrl:o,expirationTime:a}},n.origin))})).catch((function(e){console.error("Error: in all promises",e)}))}if(t.sessionData){var a=t.sessionData,c=a.sid,l=a.clientid,d=a.apiV3url,u=a.logintimeoutperiod,p=Date.now()+1e3*u;e.extension.store.set("intelligence_bank_session_token",c),e.extension.store.set("intelligence_bank_client_token",l),e.extension.store.set("intelligence_bank_url",d),e.extension.store.set("intelligence_bank_expiration_token",p.toString())}}),!1)}},{key:"saveExtensionData",value:function(e){var n=this.state.config,t=[];n.saveFullResponse?t=e:e.forEach((function(e){t.push(e.id.videoId)})),this.extension.field.setData({items:t}),this.setState({videoList:e})}},{key:"deleteVideo",value:function(e){var n=e.target.parentNode.parentNode.parentNode.id,t=this.state.videoList;t.splice(t.findIndex((function(e){return e.id.videoId===n})),1),this.saveExtensionData(t)}},{key:"sonResponse",value:function(e,n){e&&this.setState({message:n.message})}},{key:"render",value:function(){var e=this,n=this.state,t=n.videoList,s=n.config;return Object(f.jsx)("header",{className:"App-header",children:Object(f.jsxs)("div",{className:"wrapper",children:[Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("div",{className:"reference-loading",style:{display:"none"},children:Object(f.jsxs)("div",{className:"loading-flash",children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{})]})}),Object(f.jsx)("div",{className:"main",children:Object(f.jsx)("div",{className:"selected-item",children:Object(f.jsx)("div",{className:"row selected-list",children:Object(f.jsx)("ul",{className:"drag1",ref:this.dragulaDecorator,children:t&&t.map((function(n){return Object(f.jsx)("li",{id:n.id.videoId,title:n.snippet.title,children:Object(f.jsxs)("div",{className:"file",children:[Object(f.jsx)("a",{href:"https://www.youtube.com/embed/".concat(n.id.videoId),target:"_blank",className:"fileimage",children:Object(f.jsx)("span",{className:"fileimg",style:{backgroundImage:"url(".concat(n.snippet.thumbnails.default.url,")")}})}),Object(f.jsx)("span",{children:n.snippet.title}),Object(f.jsxs)("span",{className:"file-text",children:["Channel Name-",n.snippet.channelTitle]}),Object(f.jsxs)("span",{className:"file-text",children:["Description-",n.snippet.description]}),Object(f.jsx)("div",{className:"file-action trash",onClick:e.deleteVideo,children:Object(f.jsx)("span",{className:"close-icon"})})]})},n.snippet.channelTitle)}))})})})})]}),Object(f.jsx)(k,{url:s.redirectUrl,bridge:this.sonResponse,videos:t,children:"Choose Asset"})]})})}}]),t}(i.a.Component);var w=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(c.a,{children:Object(f.jsx)(l.c,{children:Object(f.jsx)(l.a,{exact:!0,path:"/",component:y})})})})},C=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,81)).then((function(n){var t=n.getCLS,s=n.getFID,i=n.getFCP,o=n.getLCP,a=n.getTTFB;t(e),s(e),i(e),o(e),a(e)}))};a.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(w,{})}),document.getElementById("root")),C()}},[[80,1,2]]]);