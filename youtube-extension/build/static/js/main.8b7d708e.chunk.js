(this["webpackJsonpyoutube-extension"]=this["webpackJsonpyoutube-extension"]||[]).push([[0],{42:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var s=n(0),i=n.n(s),o=n(32),c=n.n(o),a=n(35),l=n(2),r=n(8),d=n(9),u=n(11),p=n(18),h=n(17),f=(n(42),n(33)),j=n.n(f),b=n(13),v=n.n(b),g=n(15),m=n(16),x=n.n(m),O=n(1),w=null,k=null,N=null;function y(){null===k?(clearInterval(N),N=null):null===k||k.closed?null!==k&&k.closed&&(clearInterval(N),w.focus(),w.close({message:"child was closed"}),N=null,k=null):k.focus()}var C=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).onClickHandler=s.onClickHandler.bind(Object(u.a)(s)),w=window.self,s}return Object(d.a)(n,[{key:"onClickHandler",value:function(){var e=this.props,t=e.url,n=e.name,s=e.opts,i=e.videos,o=e.sid,c=e.content;console.log("sid and content in window opener >>>>",o,c),!k||k.closed?(k=w.open(t,n,s),setTimeout((function(){k.opener.postMessage({message:"Opening YouTube Popup",selectedVideos:{videos:i,sid:o,content:c}},"*")}),0),null===N&&(N=setInterval(y,2e3))):k.focus()}},{key:"render",value:function(){var e=this.props.children;return Object(O.jsx)("button",{className:"choose_btn",type:"choose_btn",onClick:this.onClickHandler,children:e})}}]),n}(i.a.Component);C.defaultProps={name:"YouTube Popup",opts:"dependent=".concat(1,", alwaysOnTop=",1,", alwaysRaised=",1,", width=",800,", height=",590)};var L=n(34),S=n.n(L),I=function(){function e(t){var n=t.platformUrl;Object(r.a)(this,e),this.platformUrl=n}return Object(d.a)(e,[{key:"getSidandContent",value:function(){var e="https://".concat(this.platformUrl,"/v1/auth/app/getYapiAddress"),t=new URL(e);"".concat(t.protocol,"//").concat(t.host);return new Promise((function(t,n){try{t(x.a.get(e,{headers:{Origin:"https://app.contentstack.com"}}))}catch(s){n(s)}}))}}]),e}(),D=function(e,t){return Object(g.a)(v.a.mark((function n(){var s;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("config and selected videos here >>>>>>",t),s=new I(e),n.next=4,s.getSidandContent();case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))()},R=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).dragulaDecorator=function(e){if(e){j()([e],{copySortSource:!0})}},s.extension={},s.state={message:"",videoList:[],config:{},sid:"",content:""},s.sonResponse=s.sonResponse.bind(Object(u.a)(s)),s.deleteVideo=s.deleteVideo.bind(Object(u.a)(s)),s}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;S.a.init().then((function(t){console.log("extension here from ui extension >>>>>>>>",t);var n=t.field.getData().items;console.log("items here >>>>>> from field",n),t.window.enableAutoResizing(),n&&"object"!==typeof n[0]?D(t.config,n.toString()).then((function(s){console.log("if response from bank here >>>>>>>",s),e.setState({config:t.config,videoList:n||[],sid:s.data.SID,content:s.data.content},(function(){e.extension=t,t.window.enableAutoResizing()}))})).catch((function(e){console.log("if er from bank here >>>>",e)})):(console.log("else statement executed unkown causes"),e.setState({config:t.config,videoList:n||[]},(function(){e.extension=t,t.window.enableAutoResizing()})))}));window.addEventListener("message",(function(t){var n=t.data,s=e.state,i=s.videoList,o=s.sid,c=s.content;if(n.getConfig){var a=e.state.config;t.source.postMessage({message:"Sending Config files",config:a,selectedVideos:{videos:i,sid:o,content:c}},t.origin)}else n.selectedVideosList&&e.saveExtensionData(n.selectedVideosList)}),!1)}},{key:"saveExtensionData",value:function(e){var t=this.state.config,n=[];t.saveFullResponse?n=e:e.forEach((function(e){n.push(e.id.videoId)})),this.extension.field.setData({items:n}),this.setState({videoList:e})}},{key:"deleteVideo",value:function(e){var t=e.target.parentNode.parentNode.parentNode.id,n=this.state.videoList;n.splice(n.findIndex((function(e){return e.id.videoId===t})),1),this.saveExtensionData(n)}},{key:"sonResponse",value:function(e,t){e&&this.setState({message:t.message})}},{key:"render",value:function(){var e=this,t=this.state,n=t.videoList,s=t.config,i=t.sid,o=t.content;return console.log("sid and content in home >>>>>",i,o),Object(O.jsx)("header",{className:"App-header",children:Object(O.jsxs)("div",{className:"wrapper",children:[Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("div",{className:"reference-loading",style:{display:"none"},children:Object(O.jsxs)("div",{className:"loading-flash",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{})]})}),Object(O.jsx)("div",{className:"main",children:Object(O.jsx)("div",{className:"selected-item",children:Object(O.jsx)("div",{className:"row selected-list",children:Object(O.jsx)("ul",{className:"drag1",ref:this.dragulaDecorator,children:n&&n.map((function(t){return Object(O.jsx)("li",{id:t.id.videoId,title:t.snippet.title,children:Object(O.jsxs)("div",{className:"file",children:[Object(O.jsx)("a",{href:"https://www.youtube.com/embed/".concat(t.id.videoId),target:"_blank",className:"fileimage",children:Object(O.jsx)("span",{className:"fileimg",style:{backgroundImage:"url(".concat(t.snippet.thumbnails.default.url,")")}})}),Object(O.jsx)("span",{children:t.snippet.title}),Object(O.jsxs)("span",{className:"file-text",children:["Channel Name-",t.snippet.channelTitle]}),Object(O.jsxs)("span",{className:"file-text",children:["Description-",t.snippet.description]}),Object(O.jsx)("div",{className:"file-action trash",onClick:e.deleteVideo,children:Object(O.jsx)("span",{className:"close-icon"})})]})},t.snippet.channelTitle)}))})})})})]}),Object(O.jsx)(C,{url:s.redirectUrl,bridge:this.sonResponse,videos:n,sid:i,content:o,children:"Choose Assets"})]})})}}]),n}(i.a.Component);var T=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(a.a,{children:Object(O.jsx)(l.c,{children:Object(O.jsx)(l.a,{exact:!0,path:"/",component:R})})})})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,80)).then((function(t){var n=t.getCLS,s=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),s(e),i(e),o(e),c(e)}))};c.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(T,{})}),document.getElementById("root")),V()}},[[79,1,2]]]);